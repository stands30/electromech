<?php if (!defined('BASEPATH')) exit('No direct script access allowed');class Testimonials_model extends CI_Model{	/**	* Instanciar o CI	*/	function __construct()    {        // Call the Model constructor        parent::__construct();    }		public function getGenPrmforDropdown($genPrmGroup,$search='')    {        $genPrmSqlQuery = "SELECT  gnp_value as id,gnp_name as text FROM gen_prm where gnp_group ='".$genPrmGroup."' and gnp_status IN (".ACTIVE_STATUS.")  ";        if($search !='')        {          $genPrmSqlQuery.=" and gnp_name LIKE '%".$search."%' ";        }        $genPrmSqlQuery.="  ORDER BY gnp_order ASC";        $result = $this->home_model->executeSqlQuery($genPrmSqlQuery,'result');        return $result;    }		public function getTestimonialForList($resType,$dataOptn='')		{			$sqlQuery = "Select *,(DATE_FORMAT(tml_crdt_dt, '%d/%m/%Y')) tml_crdt_date,									(select gnp_name from gen_prm where gnp_group = 'enable_disable_status' and gnp_value = tml_enable_status) tml_enable_status_name									from testimonial where tml_status = '".ACTIVE_STATUS."'";			$result = $this->home_model->executeDataTableSqlQuery($sqlQuery,$resType,$dataOptn);			return $result;		}		public function getTestimonialForEdit($tml_id)		{			$sqlQuery = "Select * from testimonial where tml_status = '".ACTIVE_STATUS."' and tml_id = ".$tml_id;			$row = $this->home_model->executeSqlQuery($sqlQuery,'row');			return $row;		}		  public function deleteTestimonial($id)		  {		  	    $sql = "update testimonial set tml_status = ".INACTIVE_STATUS."    Where tml_id = ".$id;				$query = $this->db->query($sql);				if(!empty($query))				{				return true;		        }		  }	  public function getLoginGallery()		{			$sqlQuery = "Select * from gallery_set where tml_status = '".ACTIVE_STATUS."' and tml_type = ".LOGIN_GALLERY;			$result = $this->home_model->executeSqlQuery($sqlQuery,'result');			return $result;		}		public	  function getCustomerDropdown($search)	  {	    $peopleSqlQuery = "SELECT  cus_id as id, (select ppl_name from people where ppl_id = cus_ppl_id and ppl_status = ".ACTIVE_STATUS.") text FROM customer where cus_status IN (" . ACTIVE_STATUS . ")";	    if ($search != '')	    {	      $peopleSqlQuery.= " and (select ppl_name from people where ppl_id = cus_ppl_id and ppl_status = ".ACTIVE_STATUS.") LIKE '%" . $search . "%' ";	    }	    $peopleSqlQuery.= "  ORDER BY cus_crdt_dt ASC";	    // ***** It is used to reset value of select2 ****** //	    $resetResult = array(	      'id' => '0',	      'text' => 'Please Select People'	    );	    $queryResult = $this->home_model->executeSqlQuery($peopleSqlQuery, 'result');	      if($search =='')		  {		    array_unshift($queryResult,$resetResult);		  }	    // ***** It is used to reset value of select2 ****** //	    return $queryResult;	  }	  public function getGenPrmIncrnValue()	{		$sqlQuery = "select (ifnull(max(tml_order),0) + 1) new_tml_order from testimonial where tml_status = ".ACTIVE_STATUS;		$row = $this->home_model->executeSqlQuery($sqlQuery,'row');		return $row->new_tml_order;	}	public function changeTestimonialStatus()      {        $this->db->trans_start();        $count=$this->input->post('count');        $tml_id=$this->input->post('tml_id');        $status = $this->input->post('status');        $tml_id = implode(",", $tml_id);         $sql="update testimonial set tml_enable_status = ".$status." where tml_id IN (".$tml_id.") ";           log_message('nexlog','>> MODEL : changeProcessingUnitStatus-Query :'.$sql);        $query=$this->db->query($sql);        $this->db->trans_complete();        return true;      }}